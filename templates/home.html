{% extends 'base.html' %}

{% load static thumbnail_safe editais_filters %}

{% block title %}AgroHub UniRV - Conceito Visual Moderno{% endblock %}

{% block page_id %}home{% endblock %}


{% block extra_head %}
  <!-- Preload LCP hero image with responsive srcset for optimal candidate selection -->
  <!-- Only preload AVIF (preferred format) - browser will fallback to WebP/JPEG automatically if needed -->
  <!-- Preloading both formats causes warnings when browser only uses one -->
  <link
    rel="preload"
    as="image"
    imagesrcset="{% static 'img/hero/agrohub-hero-480w.avif' %} 480w,
                 {% static 'img/hero/agrohub-hero-768w.avif' %} 768w,
                 {% static 'img/hero/agrohub-hero-1024w.avif' %} 1024w,
                 {% static 'img/hero/agrohub-hero-1600w.avif' %} 1600w,
                 {% static 'img/hero/agrohub-hero-2400w.avif' %} 2400w"
    imagesizes="100vw"
    type="image/avif"
    fetchpriority="high"
    id="preload-avif-hero"
  />
{% endblock %}

{% block content %}
<div class="bg-gray-50 text-gray-800">
  <!-- HERO SECTION -->
  <header class="relative min-h-[60vh] md:min-h-[70vh] flex items-center justify-center overflow-hidden" style="background-image: url('{% static 'img/hero/agrohub-hero-lqip.jpg' %}'); background-size: cover; background-position: center;">
    <picture class="hero-media">
      <!-- AVIF sources (best compression, modern browsers) -->
      <source
        type="image/avif"
        srcset="{% static 'img/hero/agrohub-hero-480w.avif' %} 480w,
                {% static 'img/hero/agrohub-hero-768w.avif' %} 768w,
                {% static 'img/hero/agrohub-hero-1024w.avif' %} 1024w,
                {% static 'img/hero/agrohub-hero-1600w.avif' %} 1600w,
                {% static 'img/hero/agrohub-hero-2400w.avif' %} 2400w"
        sizes="100vw"
      />
      <!-- WebP sources (widely supported, good compression) -->
      <source
        type="image/webp"
        srcset="{% static 'img/hero/agrohub-hero-480w.webp' %} 480w,
                {% static 'img/hero/agrohub-hero-768w.webp' %} 768w,
                {% static 'img/hero/agrohub-hero-1024w.webp' %} 1024w,
                {% static 'img/hero/agrohub-hero-1600w.webp' %} 1600w,
                {% static 'img/hero/agrohub-hero-2400w.webp' %} 2400w"
        sizes="100vw"
      />
      <!-- JPEG fallback (universal support) -->
      <img
        src="{% static 'img/hero/agrohub-hero-1024w.jpg' %}"
        srcset="{% static 'img/hero/agrohub-hero-480w.jpg' %} 480w,
                {% static 'img/hero/agrohub-hero-768w.jpg' %} 768w,
                {% static 'img/hero/agrohub-hero-1024w.jpg' %} 1024w,
                {% static 'img/hero/agrohub-hero-1600w.jpg' %} 1600w,
                {% static 'img/hero/agrohub-hero-2400w.jpg' %} 2400w"
        sizes="100vw"
        width="1024"
        height="1024"
        fetchpriority="high"
        decoding="async"
        alt="AgroHub UniRV - Centro de Inovação e Tecnologia com infraestrutura moderna para pesquisa e desenvolvimento no agronegócio"
        onload="this.classList.add('is-loaded');"
        style="background: radial-gradient(circle at top, #1f2a6b, #0b122c);"
      />
    </picture>

    <div class="container relative z-10 px-6 pt-16 pb-8">
      <div class="max-w-4xl">
        <div class="reveal-up flex flex-col sm:flex-row gap-3 mb-4">
          <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/20 backdrop-blur-md text-white/90 text-xs font-bold uppercase tracking-wider">
            <span class="w-2 h-2 rounded-full bg-agrohubGreen animate-pulse"></span>
            Centro de Inovação UniRV
          </div>
          <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/20 backdrop-blur-md text-white/90 text-xs font-medium">
            <i class="fas fa-handshake text-agrohubGreen"></i>
            Apoio FINEP
          </div>
        </div>
        <h1 class="reveal-up text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4">
          O Futuro do <br/>
          <span class="text-transparent bg-clip-text" style="background-image: linear-gradient(to right, #34d399, #5eead4);">
            Agronegócio
          </span> Começa Aqui.
        </h1>
        <p class="reveal-up text-base md:text-lg text-gray-200 mb-6 max-w-2xl leading-relaxed border-l-4 border-agrohubGreen pl-6">
          O AgroHub UniRV é o centro de inovação, pesquisa aplicada e pós-graduação da Universidade de Rio Verde, projetado para conectar academia, empresas, startups, produtores e poder público em soluções tecnológicas para o agronegócio. Nossa missão é traduzir pesquisa em produtos e serviços sustentáveis, formando recursos humanos especializados e posicionando Rio Verde como polo de referência em inovação agropecuária.
        </p>
        <div class="reveal-up flex flex-col sm:flex-row gap-4 mb-8">
          <a href="{% url 'editais_index' %}" class="hero-btn bg-white text-unirvBlue px-6 py-3 rounded-xl font-bold text-base hover:bg-gray-100 transition-all transform hover:-translate-y-1 shadow-xl flex items-center justify-center gap-2 relative z-20">
            Ver Editais Abertos <i class="fas fa-arrow-right"></i>
          </a>
          <a href="{% url 'ambientes_inovacao' %}" class="hero-btn px-6 py-3 rounded-xl font-bold text-base text-white border border-white/30 hover:bg-white/10 backdrop-blur-md transition-all flex items-center justify-center gap-2 relative z-20">
            <i class="fas fa-play-circle"></i> Conhecer Infraestrutura
          </a>
        </div>
      </div>
    </div>
    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 md:bottom-24 left-1/2 -translate-x-1/2 text-white z-10 pointer-events-none hidden md:flex flex-col items-center">
      <span class="text-xs uppercase tracking-widest mb-2 opacity-70">Role para baixo</span>
      <i class="fas fa-chevron-down opacity-70 text-2xl animate-slow-bounce"></i>
    </div>
  </header>

  <!-- STATS OVERLAP SECTION -->
  <section class="relative z-20 pt-8 md:pt-12 pb-20 px-6 fold-section">
    <div class="container mx-auto">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <!-- Stat Cards -->
        <div class="stat-card bg-white p-8 rounded-2xl shadow-xl border-b-4 border-agrohubGreen transform hover:-translate-y-2 transition-all duration-300 group">
          <div class="text-4xl font-bold text-unirvBlue mb-1 flex items-baseline"><span class="counter" data-target="12">0</span><span>+</span></div>
          <p class="text-xs text-gray-500 font-bold uppercase tracking-wider">Startups</p>
          <div class="w-12 h-1 bg-gray-100 mt-4 rounded-full overflow-hidden"><div class="h-full bg-agrohubGreen w-0 group-hover:w-full transition-all duration-700"></div></div>
        </div>
        <div class="stat-card bg-white p-8 rounded-2xl shadow-xl border-b-4 border-unirvBlue transform hover:-translate-y-2 transition-all duration-300 group">
          <div class="text-4xl font-bold text-unirvBlue mb-1 flex items-baseline"><span>R$</span><span class="counter" data-target="10">0</span><span>M</span></div>
          <p class="text-xs text-gray-500 font-bold uppercase tracking-wider">Investimento</p>
          <div class="w-12 h-1 bg-gray-100 mt-4 rounded-full overflow-hidden"><div class="h-full bg-unirvBlue w-0 group-hover:w-full transition-all duration-700"></div></div>
        </div>
        <div class="stat-card bg-white p-8 rounded-2xl shadow-xl border-b-4 border-agrohubGreen transform hover:-translate-y-2 transition-all duration-300 group">
          <div class="text-4xl font-bold text-unirvBlue mb-1 flex items-baseline"><span class="counter" data-target="40">0</span><span>ha</span></div>
          <p class="text-xs text-gray-500 font-bold uppercase tracking-wider">Smart Farm</p>
          <div class="w-12 h-1 bg-gray-100 mt-4 rounded-full overflow-hidden"><div class="h-full bg-agrohubGreen w-0 group-hover:w-full transition-all duration-700"></div></div>
        </div>
        <div class="stat-card bg-white p-8 rounded-2xl shadow-xl border-b-4 border-agrohubBlue transform hover:-translate-y-2 transition-all duration-300 group">
          <div class="text-4xl font-bold text-unirvBlue mb-1 flex items-baseline"><span class="counter" data-target="3">0</span></div>
          <p class="text-xs text-gray-500 font-bold uppercase tracking-wider">Fases</p>
          <div class="w-12 h-1 bg-gray-100 mt-4 rounded-full overflow-hidden"><div class="h-full bg-agrohubBlue w-0 group-hover:w-full transition-all duration-700"></div></div>
        </div>

      </div>

    </div>

  </section>

  <!-- PILLARS SECTION -->
  <section id="pillars-section" class="py-20 bg-gray-50 relative overflow-hidden fold-section">
    <div class="container mx-auto px-6 relative z-10">
      <div class="text-center max-w-2xl mx-auto mb-16">
        <span class="text-green-700 font-bold tracking-widest uppercase text-sm">Nossos Fundamentos</span>
        <h2 class="text-3xl md:text-4xl font-extrabold text-unirvBlue mt-2 mb-4">Pilares da Inovação</h2>
      </div>
      <!-- Grid com items-stretch para garantir mesma altura -->
      <div class="grid md:grid-cols-4 gap-6 items-stretch">
        <!-- Card 1 -->
        <div class="pillar-card bg-white p-8 pb-10 rounded-2xl border border-gray-100 shadow-sm hover:shadow-2xl transition-all duration-300 group hover:-translate-y-2 text-center">
          <div class="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center text-unirvBlue text-3xl mb-6 mx-auto group-hover:bg-unirvBlue group-hover:text-white transition-colors duration-300">
            <i class="fas fa-microscope"></i>
          </div>
          <h3 class="font-bold text-lg text-gray-900 mb-3 group-hover:text-unirvBlue transition-colors">Pesquisa Aplicada</h3>
          <p class="text-sm text-gray-500 grow">Conexão direta entre laboratório e campo para resolver dores reais.</p>
        </div>
        <!-- Card 2 -->
        <div class="pillar-card bg-white p-8 pb-10 rounded-2xl border border-gray-100 shadow-sm hover:shadow-2xl transition-all duration-300 group hover:-translate-y-2 text-center">
          <div class="w-16 h-16 bg-green-50 rounded-2xl flex items-center justify-center text-agrohubGreen text-3xl mb-6 mx-auto group-hover:bg-agrohubGreen group-hover:text-white transition-colors duration-300">
            <i class="fas fa-wifi"></i>
          </div>
          <h3 class="font-bold text-lg text-gray-900 mb-3 group-hover:text-agrohubGreen transition-colors">Digitalização</h3>
          <p class="text-sm text-gray-500 grow">IoT, Drones e Big Data integrados para o Agro 4.0.</p>
        </div>
        <!-- Card 3 -->
        <div class="pillar-card bg-white p-8 pb-10 rounded-2xl border border-gray-100 shadow-sm hover:shadow-2xl transition-all duration-300 group hover:-translate-y-2 text-center">
          <div class="w-16 h-16 bg-yellow-50 rounded-2xl flex items-center justify-center text-yellow-600 text-3xl mb-6 mx-auto group-hover:bg-yellow-500 group-hover:text-white transition-colors duration-300">
            <i class="fas fa-lightbulb"></i>
          </div>
          <h3 class="font-bold text-lg text-gray-900 mb-3 group-hover:text-yellow-600 transition-colors">Empreendedorismo</h3>
          <p class="text-sm text-gray-500 grow">Incubação de startups e cultura de inovação aberta.</p>
        </div>
        <!-- Card 4 -->
        <div class="pillar-card bg-white p-8 pb-10 rounded-2xl border border-gray-100 shadow-sm hover:shadow-2xl transition-all duration-300 group hover:-translate-y-2 text-center">
          <div class="w-16 h-16 bg-teal-50 rounded-2xl flex items-center justify-center text-teal-600 text-3xl mb-6 mx-auto group-hover:bg-teal-600 group-hover:text-white transition-colors duration-300">
            <i class="fas fa-leaf"></i>
          </div>
          <h3 class="font-bold text-lg text-gray-900 mb-3 group-hover:text-teal-600 transition-colors">Sustentabilidade</h3>
          <p class="text-sm text-gray-500 grow">Tecnologia para produzir mais com menos impacto ambiental.</p>
        </div>

      </div>

    </div>

  </section>

  <!-- INNOVATION DECK & ECOSYSTEM TICKER SECTION -->
  <section class="py-16 md:py-20 bg-white fold-section">
    <div class="container mx-auto px-6">
      
      <!-- Innovation Deck: Startup Cards -->
      <div class="mb-16">
        <div class="text-center mb-8">
          <span class="text-agrohubGreen font-bold tracking-widest uppercase text-sm">Nossas Startups</span>
          <h2 class="text-3xl md:text-4xl font-extrabold text-unirvBlue mt-2 mb-4">Innovation Deck</h2>
          <p class="text-lg text-gray-600 max-w-2xl mx-auto">
            Conheça as startups que estão transformando o agronegócio com inovação e tecnologia
          </p>
        </div>

        <!-- Scrollable Cards Container -->
        <div class="relative overflow-y-visible overflow-x-hidden z-0">
          <!-- Desktop Navigation Buttons -->
          <button id="startup-carousel-prev" class="carousel-nav-button hidden md:flex absolute left-0 top-1/2 z-10 bg-white/90 border border-gray-200 rounded-full p-3 shadow-lg" aria-label="Anterior">
            <i class="fas fa-chevron-left text-unirvBlue"></i>
          </button>
          <button id="startup-carousel-next" class="carousel-nav-button hidden md:flex absolute right-0 top-1/2 z-10 bg-white/90 border border-gray-200 rounded-full p-3 shadow-lg" aria-label="Próximo">
            <i class="fas fa-chevron-right text-unirvBlue"></i>
          </button>
          <!-- Ambient Glow: Blob de gradiente para glassmorphism -->
          <div id="ambient-glow-blob" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-blue-50/50 via-green-50/50 to-blue-50/50 blur-3xl rounded-full opacity-60 pointer-events-none" style="width: 120%; min-width: 120%; height: 300px; min-height: 300px; z-index: -10;"></div>
          <div id="startup-carousel" class="overflow-x-auto snap-x snap-mandatory scrollbar-hide -mx-6 px-6" style="scrollbar-width: none; -ms-overflow-style: none; scroll-snap-type: x mandatory; overflow-y: visible; scroll-behavior: smooth;">
            <div class="flex gap-6 pb-4 pt-2">
              {% for startup in startups %}
              <a href="{% if startup.slug %}{% url 'startup_detail_slug' slug=startup.slug %}{% else %}#{% endif %}" 
                 class="flex-shrink-0 snap-center snap-always group"
                 style="width: 85vw; max-width: 320px;"
                 aria-label="Ver detalhes de {{ startup.name }}">
                <div class="bg-white/80 backdrop-blur-md border border-gray-200 rounded-2xl p-6 h-full shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2">
                  <!-- Logo Container -->
                  <div class="flex items-center justify-center h-32 mb-4 bg-gray-50 rounded-xl overflow-hidden p-4">
                    {% if startup.logo %}
                      {% if startup.logo|is_svg %}
                        <img src="{{ startup.logo.url }}" 
                             alt="{{ startup.name }} logo" 
                             class="h-20 w-auto max-w-full object-contain mx-auto"
                             loading="lazy"
                             style="max-height: 5rem;">
                      {% else %}
                        {% safe_thumbnail startup.logo "card_thumb" as thumb %}
                        {% if thumb %}
                          <img src="{{ thumb.url }}" 
                               alt="{{ startup.name }} logo" 
                               class="h-20 w-auto max-w-full object-contain mx-auto"
                               width="{{ thumb.width }}"
                               height="{{ thumb.height }}"
                               loading="lazy"
                               style="max-height: 5rem;">
                        {% else %}
                          <img src="{{ startup.logo.url }}" 
                               alt="{{ startup.name }} logo" 
                               class="h-20 w-auto max-w-full object-contain mx-auto"
                               loading="lazy"
                               style="max-height: 5rem;">
                        {% endif %}
                      {% endif %}
                    {% else %}
                      <!-- Placeholder with initials -->
                      <div class="w-20 h-20 rounded-full bg-gradient-to-br from-unirvBlue to-agrohubGreen flex items-center justify-center text-white font-bold text-2xl">
                        {{ startup.name|slice:":2"|upper }}
                      </div>
                    {% endif %}
                  </div>
                  
                  <!-- Startup Name -->
                  <h3 class="font-bold text-lg text-gray-900 mb-2 line-clamp-2 group-hover:text-agrohubGreen transition-colors">
                    {{ startup.name }}
                  </h3>
                  
                  <!-- Category Badge -->
                  <div class="flex items-center gap-2">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border {{ startup.get_badge_color }}">
                        {{ startup.get_category_display }}
                      </span>
                  </div>
                </div>
              </a>
              {% endfor %}
              
              <!-- CTA Card: "Sua Startup Aqui" -->
              <a href="{% url 'register' %}" 
                 class="flex-shrink-0 snap-center snap-always group"
                 style="width: 85vw; max-width: 320px;"
                 aria-label="Cadastre sua startup">
                <div class="bg-gradient-to-br from-unirvBlue to-agrohubGreen border-2 border-dashed border-white/30 rounded-2xl p-6 h-full shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 flex flex-col items-center justify-center min-h-[280px] text-white">
                  <div class="w-20 h-20 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                    <i class="fas fa-plus text-3xl"></i>
                  </div>
                  <h3 class="font-bold text-xl mb-2 text-center">Sua Startup Aqui</h3>
                  <p class="text-white/90 text-sm text-center mb-4">
                    Faça parte do ecossistema de inovação
                  </p>
                  <span class="inline-flex items-center px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-sm font-semibold group-hover:bg-white/30 transition-colors">
                    Cadastrar <i class="fas fa-arrow-right ml-2"></i>
                  </span>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Ecosystem Ticker: Partner Logos -->
      <div class="border-t border-gray-200 pt-12">
        <div class="text-center mb-8">
          <span class="text-unirvBlue font-bold tracking-widest uppercase text-sm">Nossos Parceiros</span>
          <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 mt-2 mb-4">Ecosystem Partners</h2>
        </div>

        <!-- Infinite Marquee Container -->
        <div class="ecosystem-ticker-wrapper overflow-hidden">
          <div class="ecosystem-ticker overflow-hidden">
            <div class="ecosystem-ticker-track flex items-center gap-12">
              <!-- First set of partner logos (duplicated for seamless loop) -->
              {% for partner in partners %}
              <div class="flex-shrink-0 h-12 flex items-center justify-center px-4">
                <div class="text-gray-500 hover:text-gray-900 font-bold text-lg tracking-wider transition-colors opacity-70 hover:opacity-100">{{ partner }}</div>
              </div>
              {% endfor %}
              
              <!-- Duplicate set for seamless infinite loop -->
              {% for partner in partners %}
              <div class="flex-shrink-0 h-12 flex items-center justify-center px-4">
                <div class="text-gray-500 hover:text-gray-900 font-bold text-lg tracking-wider transition-colors opacity-70 hover:opacity-100">{{ partner }}</div>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- MISSION / HELIX SECTION -->
  <section class="py-8 md:py-10 bg-unirvBlue text-white relative fold-section">
    <div class="absolute inset-0 z-0" style="background: linear-gradient(to bottom right, #27348b, #1a237e);"></div>
    <div class="container mx-auto px-6 relative z-10">
      <div class="flex flex-col md:flex-row items-center gap-8 md:gap-12">
        <!-- LISTA -->
        <div class="md:w-1/2">
          <h2 class="text-agrohubGreen font-bold tracking-wider uppercase text-sm mb-2">Ecossistema</h2>
          <h3 class="text-4xl md:text-5xl font-extrabold mb-4">A Hélice Quádrupla</h3>
          <p class="text-gray-300 text-lg mb-6 leading-relaxed">
            Unimos as quatro forças fundamentais da inovação em um único ecossistema colaborativo.
          </p>
          <ul class="space-y-4">
            <!-- Item 1: Academia -->
            <li class="flex items-center gap-5 group">
              <div class="w-12 h-12 rounded-full bg-agrohubGreen/20 border border-agrohubGreen flex items-center justify-center text-agrohubGreen group-hover:bg-agrohubGreen group-hover:text-white transition-all">
                <i class="fas fa-graduation-cap text-lg"></i>
              </div>
              <div>
                <h4 class="font-bold text-lg">Academia (UniRV)</h4>
                <p class="text-sm text-gray-400">Pesquisa e Capital Intelectual</p>
              </div>
            </li>
            <!-- Item 2: Setor Produtivo -->
            <li class="flex items-center gap-5 group">
              <div class="w-12 h-12 rounded-full bg-unirvBlue/20 border border-unirvBlue flex items-center justify-center text-unirvBlue group-hover:bg-unirvBlue group-hover:text-white transition-all">
                <i class="fas fa-tractor text-lg"></i>
              </div>
              <div>
                <h4 class="font-bold text-lg text-white">Setor Produtivo</h4>
                <p class="text-sm text-gray-300">Empresas e Produtores</p>
              </div>
            </li>
            <!-- Item 3: Governo -->
            <li class="flex items-center gap-5 group">
              <div class="w-12 h-12 rounded-full bg-agrohubGreen/20 border border-agrohubGreen flex items-center justify-center text-agrohubGreen group-hover:bg-agrohubGreen group-hover:text-white transition-all">
                <i class="fas fa-landmark text-lg"></i>
              </div>
              <div>
                <h4 class="font-bold text-lg">Governo</h4>
                <p class="text-sm text-gray-400">Fomento e Políticas Públicas</p>
              </div>
            </li>
            <!-- Item 4: Sociedade -->
            <li class="flex items-center gap-5 group">
              <div class="w-12 h-12 rounded-full bg-agrohubBlue/20 border border-agrohubBlue flex items-center justify-center text-agrohubBlue group-hover:bg-agrohubBlue group-hover:text-white transition-all">
                <i class="fas fa-users text-lg"></i>
              </div>
              <div>
                <h4 class="font-bold text-lg">Sociedade Civil</h4>
                <p class="text-sm text-gray-400">Comunidade e Impacto Social</p>
              </div>
            </li>
          </ul>
        </div>
        <!-- ORBITA -->
        <div class="md:w-1/2 flex justify-center items-center mt-6 md:mt-0 py-2">
          <div class="orbit-container" role="img" aria-label="Representação visual da Hélice Quádrupla: quatro elementos orbitando ao redor do AgroHub UniRV">
            <!-- Anel 1: Academia -->
            <div class="orbit-ring ring-1" aria-label="Órbita da Academia">
              <div class="floating-icon orbit-icon-academia" 
                   role="img" 
                   aria-label="Academia - Pesquisa e Capital Intelectual"
                   data-tooltip="Academia (UniRV)"
                   tabindex="0">
                <i class="fas fa-graduation-cap" aria-hidden="true"></i>
              </div>
            </div>
            <!-- Anel 2: Indústria -->
            <div class="orbit-ring ring-2" aria-label="Órbita do Setor Produtivo">
              <div class="floating-icon orbit-icon-industria" 
                   role="img" 
                   aria-label="Setor Produtivo - Empresas e Produtores"
                   data-tooltip="Setor Produtivo"
                   tabindex="0">
                <i class="fas fa-tractor" aria-hidden="true"></i>
              </div>
            </div>
            <!-- Anel 3: Governo -->
            <div class="orbit-ring ring-3" aria-label="Órbita do Governo">
              <div class="floating-icon orbit-icon-governo" 
                   role="img" 
                   aria-label="Governo - Fomento e Políticas Públicas"
                   data-tooltip="Governo"
                   tabindex="0">
                <i class="fas fa-landmark" aria-hidden="true"></i>
              </div>
            </div>
            <!-- Anel 4: Sociedade -->
            <div class="orbit-ring ring-4" aria-label="Órbita da Sociedade Civil">
              <div class="floating-icon orbit-icon-sociedade" 
                   role="img" 
                   aria-label="Sociedade Civil - Comunidade e Impacto Social"
                   data-tooltip="Sociedade Civil"
                   tabindex="0">
                <i class="fas fa-users" aria-hidden="true"></i>
              </div>
            </div>
            <!-- Logo Central -->
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-[0_0_50px_rgba(255,255,255,0.4)] z-10 orbit-core" role="img" aria-label="AgroHub UniRV - Centro de Inovação e Tecnologia">
              <img src="{% static 'img/favicon.svg' %}" alt="AgroHub UniRV - Logo do Centro de Inovação" class="w-12 h-12" width="48" height="48" loading="lazy" decoding="async" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TIMELINE SECTION -->
  <section class="py-24 bg-white fold-section overflow-hidden">
    <div class="container mx-auto px-6">
      <div class="text-center mb-20">
        <h2 class="text-3xl font-extrabold text-unirvBlue">Expansão Programada</h2>
        <p class="text-gray-500 mt-2">Nossa jornada de crescimento em 3 fases estratégicas</p>
      </div>
      <!-- Wrapper para responsividade -->
      <div class="relative max-w-5xl mx-auto timeline-wrapper md:block flex flex-col overflow-hidden">
        <!-- Desktop Line Background -->
        <div class="hidden md:block timeline-line-bg"></div>
        <!-- Desktop Progress Line -->
        <div id="progress-line" class="hidden md:block timeline-line-progress"></div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-12 md:gap-8 relative z-10">
          <!-- Fase 1 -->
          <div class="timeline-item flex flex-col items-start md:items-center group relative">
            <div class="timeline-icon-mobile md:static w-14 h-14 md:w-20 md:h-20 bg-agrohubGreen border-4 border-white text-white rounded-full flex items-center justify-center font-bold text-xl md:text-3xl shadow-lg z-10 transition-transform transform group-hover:scale-110">
              <i class="fas fa-check"></i>
            </div>
            <div class="mt-2 md:mt-8 bg-white border border-gray-200 p-6 rounded-xl shadow-xl w-full md:text-center hover:shadow-xl transition-all relative">
              <div class="hidden md:block absolute -top-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-white rotate-45 border-t border-l border-gray-200"></div>
              <h3 class="font-bold text-unirvBlue text-lg">Fase 1: Fundação</h3>
              <p class="text-sm text-gray-500 mt-2">Estruturação da Incubadora YpeTech, InovaLab e espaços de coworking.</p>
              <div class="mt-4">
                <span class="px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full">100% Concluído</span>
              </div>
            </div>
          </div>
          <!-- Fase 2 (Atual) -->
          <div class="timeline-item flex flex-col items-start md:items-center group relative">
            <div class="timeline-icon-mobile md:static w-14 h-14 md:w-20 md:h-20 bg-unirvBlue border-4 border-white text-white rounded-full flex items-center justify-center font-bold text-xl md:text-3xl shadow-xl z-10 transition-transform transform group-hover:scale-110 relative">
              2
              <div class="absolute -inset-2 rounded-full border border-unirvBlue opacity-30 animate-ping"></div>
            </div>
            <div class="mt-2 md:mt-8 bg-white border-t-4 border-unirvBlue p-6 rounded-xl shadow-xl w-full md:text-center transform md:scale-105 relative z-20">
              <div class="hidden md:block absolute -top-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-white rotate-45"></div>
              <div class="absolute -top-3 right-4 md:-top-10 md:left-1/2 md:right-auto md:-translate-x-1/2 bg-green-700 text-white text-[10px] uppercase font-bold px-3 py-1 rounded-full tracking-wide shadow-sm">
                Fase Atual
              </div>
              <h3 class="font-bold text-unirvBlue text-lg mt-2 md:mt-0">Fase 2: Smart Farm</h3>
              <p class="text-sm text-gray-500 mt-2">Implementação de campos experimentais, sensores IoT e irrigação inteligente.</p>
              <div class="mt-4">
                <span class="px-3 py-1 bg-blue-100 text-unirvBlue text-xs font-bold rounded-full">Em Andamento</span>
              </div>
            </div>
          </div>
          <!-- Fase 3 -->
          <div class="timeline-item flex flex-col items-start md:items-center group opacity-60 hover:opacity-100 transition-opacity relative">
            <div class="timeline-icon-mobile md:static w-14 h-14 md:w-20 md:h-20 bg-gray-200 border-4 border-white text-gray-500 rounded-full flex items-center justify-center font-bold text-xl md:text-3xl shadow-lg z-10">
              3
            </div>
            <div class="mt-2 md:mt-8 bg-gray-50 border border-gray-100 p-6 rounded-xl shadow-sm w-full md:text-center relative">
              <div class="hidden md:block absolute -top-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-gray-50 rotate-45 border-t border-l border-gray-100"></div>
              <h3 class="font-bold text-gray-900 text-lg">Fase 3: Condomínio</h3>
              <p class="text-sm text-gray-600 mt-2">Atração de grandes empresas e construção do complexo industrial agro.</p>
              <div class="mt-4">
                <span class="px-3 py-1 bg-gray-300 text-gray-800 text-xs font-bold rounded-full">Planejado</span>
              </div>
            </div>



        </div>

      </div>

    </div>

  </section>
</div>
{% endblock %}

{% block extra_js %}
<script>
  // Desktop carousel navigation for startup cards
  document.addEventListener('DOMContentLoaded', function() {
    const carousel = document.getElementById('startup-carousel');
    const prevBtn = document.getElementById('startup-carousel-prev');
    const nextBtn = document.getElementById('startup-carousel-next');
    
    if (!carousel || !prevBtn || !nextBtn) return;
    
    const cardWidth = 320; // max-width from template
    const gap = 24; // gap-6 = 1.5rem = 24px
    
    // Smooth scroll function with custom easing
    let isScrolling = false;
    let currentAnimationFrame = null;
    
    const smoothScrollTo = function(targetScrollLeft) {
      // Cancel any ongoing scroll animation
      if (currentAnimationFrame) {
        cancelAnimationFrame(currentAnimationFrame);
        isScrolling = false;
      }
      
      const startScrollLeft = carousel.scrollLeft;
      const distance = targetScrollLeft - startScrollLeft;
      
      // If distance is very small, just scroll directly
      if (Math.abs(distance) < 1) {
        return;
      }
      
      // Calculate duration based on distance (longer distance = longer duration, but capped)
      const baseDuration = 1000; // Base 1000ms for smoother scroll
      const distanceFactor = Math.min(Math.abs(distance) / 400, 1.5); // Scale up to 1.5x for longer distances
      const duration = baseDuration * distanceFactor;
      
      const startTime = performance.now();
      isScrolling = true;
      
      // Very smooth easing function (ease-in-out-expo - smoother than quart)
      const easeInOutExpo = function(t) {
        return t === 0 ? 0 : t === 1 ? 1 : t < 0.5 
          ? Math.pow(2, 20 * t - 10) / 2 
          : (2 - Math.pow(2, -20 * t + 10)) / 2;
      };
      
      // Fallback to ease-in-out-quart if expo is too extreme
      const easeInOutQuart = function(t) {
        return t < 0.5 ? 8 * t * t * t * t : 1 - Math.pow(-2 * t + 2, 4) / 2;
      };
      
      // Use quart for more predictable smoothness
      const easingFunction = easeInOutQuart;
      
      // Disable scroll snap and scroll-behavior during animation
      // Remove Tailwind classes that might interfere
      const originalSnapType = carousel.style.scrollSnapType;
      const originalScrollBehavior = carousel.style.scrollBehavior;
      const hadSnapX = carousel.classList.contains('snap-x');
      const hadSnapMandatory = carousel.classList.contains('snap-mandatory');
      
      // Add CSS class to disable scroll snap with !important
      carousel.classList.add('carousel-smooth-scrolling');
      
      // Prevent any scroll events from interfering
      let scrollBlocked = false;
      
      const scrollBlocker = function(e) {
        if (scrollBlocked && isScrolling) {
          e.preventDefault();
          e.stopPropagation();
          return false;
        }
      };
      
      // Temporarily remove scroll listeners that might interfere
      carousel.addEventListener('scroll', scrollBlocker, { passive: false, capture: true });
      scrollBlocked = true;
      
      const animateScroll = function(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const easedProgress = easingFunction(progress);
        const targetScrollLeft = startScrollLeft + (distance * easedProgress);
        
        // Direct assignment is more reliable than scrollTo for smooth animations
        // Temporarily disable scroll snap to prevent interference
        carousel.style.scrollSnapType = 'none';
        carousel.scrollLeft = targetScrollLeft;
        
        if (progress < 1) {
          currentAnimationFrame = requestAnimationFrame(animateScroll);
        } else {
          // Re-enable scroll blocking removal
          scrollBlocked = false;
          carousel.removeEventListener('scroll', scrollBlocker, { capture: true });
          // Re-enable scroll snap and scroll-behavior after animation completes
          carousel.classList.remove('carousel-smooth-scrolling');
          carousel.style.scrollSnapType = originalSnapType || '';
          carousel.style.scrollBehavior = originalScrollBehavior || '';
          if (hadSnapX) carousel.classList.add('snap-x');
          if (hadSnapMandatory) carousel.classList.add('snap-mandatory');
          isScrolling = false;
          currentAnimationFrame = null;
        }
      };
      
      currentAnimationFrame = requestAnimationFrame(animateScroll);
    };
    
    prevBtn.addEventListener('click', function(e) {
      e.preventDefault();
      const targetScroll = carousel.scrollLeft - (cardWidth + gap);
      smoothScrollTo(Math.max(0, targetScroll));
    });
    
    nextBtn.addEventListener('click', function(e) {
      e.preventDefault();
      const targetScroll = carousel.scrollLeft + (cardWidth + gap);
      const maxScroll = carousel.scrollWidth - carousel.clientWidth;
      smoothScrollTo(Math.min(maxScroll, targetScroll));
    });
  });
</script>
{% endblock %}
