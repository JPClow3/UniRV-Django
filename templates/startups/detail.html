{% extends 'base.html' %}
{% load static %}

{% block title %}{{ startup.name }} - AgroHub UniRV{% endblock %}

{% block meta_description %}{{ startup.description|truncatewords:30|striptags|default:"Startup incubada no AgroHub UniRV" }}{% endblock %}

{% block og_title %}{{ startup.name }}{% endblock %}

{% block og_description %}{{ startup.description|truncatewords:25|striptags|default:"Startup incubada no AgroHub UniRV" }}{% endblock %}

{% block content %}
<!-- Hero Header -->
<section class="bg-gradient-to-r from-unirvBlue to-agrohubBlue text-white py-8 md:py-10 relative overflow-hidden">
  <div class="container relative z-10 px-6 pt-12">
    <div class="max-w-6xl">
      <div class="reveal-up inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/20 backdrop-blur-md text-white/90 text-xs font-bold uppercase tracking-wider mb-6">
        <span class="w-2 h-2 rounded-full bg-agrohubGreen animate-pulse"></span>
        Startup
      </div>
      <div class="flex items-start gap-6 mb-6">
        {% if startup.logo %}
          <img src="{{ startup.logo.url }}" alt="{{ startup.name }} logo" class="w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover border-4 border-white/20 shadow-xl" width="128" height="128" loading="eager" fetchpriority="high" />
        {% endif %}
        <div class="flex-1">
          <h1 class="reveal-up text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4">{{ startup.name }}</h1>
          {% if startup.description %}
          <p class="reveal-up text-lg md:text-xl text-gray-200 mb-6 leading-relaxed border-l-4 border-agrohubGreen pl-6">
            {{ startup.description|truncatewords:30 }}
          </p>
          {% endif %}
        </div>
      </div>
      <div class="flex flex-wrap gap-4 text-white/90 text-sm items-center">
        <span class="inline-flex items-center px-3 py-1.5 rounded-full bg-white/10 border border-white/20">
          <i class="fas fa-tag mr-2" aria-hidden="true"></i>
          {{ startup.get_category_display }}
        </span>
        <span class="inline-flex items-center px-3 py-1.5 rounded-full bg-white/10 border border-white/20">
          <i class="fas fa-chart-line mr-2" aria-hidden="true"></i>
          {{ startup.get_status_display }}
        </span>
        {% if startup.submitted_on %}
        <span class="inline-flex items-center px-3 py-1.5 rounded-full bg-white/10 border border-white/20">
          <i class="fas fa-calendar-alt mr-2" aria-hidden="true"></i>
          Desde {{ startup.submitted_on|date:"d/m/Y" }}
        </span>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="max-w-6xl mx-auto">
    <div class="mb-4 flex justify-end no-print">
      <button type="button" id="print-btn" class="inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all">
        <i class="fas fa-print"></i>
        Imprimir
      </button>
    </div>

    <div class="bg-white p-6 md:p-8 rounded-xl shadow-sm mb-8 border border-gray-100">
      <h2 class="text-unirvBlue text-xl font-bold mb-4">Informações da Startup</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-gray-900 font-semibold mb-2">Categoria</h3>
          <p class="text-gray-600">{{ startup.get_category_display }}</p>
        </div>
        <div>
          <h3 class="text-gray-900 font-semibold mb-2">Status</h3>
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium {{ startup.get_phase_badge_class }}">
            {{ startup.get_status_display }}
          </span>
        </div>
        {% if startup.proponente %}
        <div>
          <h3 class="text-gray-900 font-semibold mb-2">Responsável</h3>
          <p class="text-gray-600">{{ startup.proponente.get_full_name|default:startup.proponente.username }}</p>
        </div>
        {% endif %}
        {% if startup.submitted_on %}
        <div>
          <h3 class="text-gray-900 font-semibold mb-2">Data de Entrada</h3>
          <p class="text-gray-600">{{ startup.submitted_on|date:"d/m/Y" }}</p>
        </div>
        {% endif %}
        {% if startup.contato %}
        <div>
          <h3 class="text-gray-900 font-semibold mb-2">Contato</h3>
          <p class="text-gray-600">{{ startup.contato|linebreaks }}</p>
        </div>
        {% endif %}
        {% if startup.edital %}
        <div>
          <h3 class="text-gray-900 font-semibold mb-2">Edital Relacionado</h3>
          <a href="{% url 'edital_detail_slug' startup.edital.slug %}" class="text-unirvBlue hover:text-agrohubBlue font-medium">
            {{ startup.edital.titulo|truncatewords:10 }}
          </a>
        </div>
        {% endif %}
      </div>
    </div>

    {% if startup.description %}
    <div class="bg-white p-6 md:p-8 rounded-xl shadow-sm mb-8 border border-gray-100">
      <h2 class="text-unirvBlue text-xl font-bold mb-4">Descrição</h2>
      <div class="prose max-w-none text-gray-700">
        <p>{{ startup.description|linebreaks }}</p>
      </div>
    </div>
    {% endif %}

    <div class="bg-white p-6 md:p-8 rounded-xl shadow-sm border border-gray-100">
      <div class="flex flex-col sm:flex-row gap-4 justify-between items-center">
        <a href="{% url 'startups_showcase' %}" class="inline-flex items-center gap-2 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors">
          <i class="fas fa-arrow-left"></i>
          Voltar para Startups
        </a>
        {% if user.is_staff %}
        <a href="{% url 'admin:editais_project_change' startup.pk %}" class="inline-flex items-center gap-2 px-6 py-3 bg-unirvBlue text-white rounded-lg hover:bg-blue-700 transition-colors">
          <i class="fas fa-edit"></i>
          Editar no Admin
        </a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const printBtn = document.getElementById('print-btn');
    if (printBtn) {
      printBtn.addEventListener('click', function() {
        window.print();
      });
    }
  });
</script>
{% endblock %}

