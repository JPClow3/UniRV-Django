{% extends 'base.html' %}
{% load static %}

{% block title %}Registrar - AgroHub UniRV{% endblock %}

{% block content %}
<div class="auth-layout">
  <div class="auth-inner">
    <!-- Back Button -->
    <a href="{% url 'home' %}" class="auth-back-link mb-6">
      <i class="fas fa-arrow-left w-5 h-5 group-hover:-translate-x-1 transition-transform"></i>
      <span class="font-medium">Voltar para o site</span>
    </a>

    <!-- Card -->
    <div class="auth-card">
      <!-- Logo / Heading -->
      <div class="text-center mb-8">
        <a href="{% url 'home' %}" class="inline-flex items-center justify-center gap-3 mb-3">
          <div class="w-12 h-12 rounded-2xl bg-white/90 flex items-center justify-center shadow-md">
            <img src="{% static 'img/Logo.svg' %}" alt="AgroHub UniRV Logo" class="w-10 h-10" width="40" height="40" loading="lazy" />
          </div>
        </a>
        <h1 class="auth-title">AgroHub UniRV</h1>
        <p class="auth-muted">Criar uma nova conta para acessar o ecossistema</p>
      </div>

      {% if form.errors %}
      <div class="mb-6 rounded-2xl border border-red-200 bg-red-50/90 px-4 py-3 flex gap-3">
        <i class="fas fa-exclamation-circle text-red-600 mt-0.5"></i>
        <div class="text-sm text-red-900">
          {% if form.non_field_errors %}
            {{ form.non_field_errors }}
          {% else %}
            Por favor, corrija os erros abaixo.
          {% endif %}
        </div>
      </div>
      {% endif %}

      <form method="post" class="space-y-6">
        {% csrf_token %}
        
        <div class="space-y-2">
          <label for="id_first_name" class="auth-label">Nome *</label>
          <input
            id="id_first_name"
            name="first_name"
            type="text"
            placeholder="Seu nome"
            required
            autocomplete="given-name"
            class="auth-input"
            value="{{ form.first_name.value|default:'' }}"
          >
          {% if form.first_name.errors %}
            <div class="text-red-500 text-xs">{{ form.first_name.errors }}</div>
          {% endif %}
        </div>

        <div class="space-y-2">
          <label for="id_last_name" class="auth-label">Sobrenome</label>
          <input
            id="id_last_name"
            name="last_name"
            type="text"
            placeholder="Seu sobrenome"
            autocomplete="family-name"
            class="auth-input"
            value="{{ form.last_name.value|default:'' }}"
          >
          {% if form.last_name.errors %}
            <div class="text-red-500 text-xs">{{ form.last_name.errors }}</div>
          {% endif %}
        </div>

        <div class="space-y-2">
          <label for="id_username" class="auth-label">Nome de usuário *</label>
          <input
            id="id_username"
            name="username"
            type="text"
            placeholder="nomeusuario"
            required
            autocomplete="username"
            class="auth-input"
            value="{{ form.username.value|default:'' }}"
          >
          {% if form.username.errors %}
            <div class="text-red-500 text-xs">{{ form.username.errors }}</div>
          {% endif %}
          <small class="text-xs text-gray-200 md:text-gray-500 block mt-1">Apenas letras, números e @/./+/-/_</small>
        </div>

        <div class="space-y-2">
          <label for="id_email" class="auth-label">E-mail *</label>
          <div class="relative">
            <i class="fas fa-envelope absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"></i>
            <input
              id="id_email"
              name="email"
              type="email"
              placeholder="seu@email.com"
              required
              autocomplete="email"
              class="auth-input pl-10"
              value="{{ form.email.value|default:'' }}"
            >
          </div>
          {% if form.email.errors %}
            <div class="text-red-500 text-xs">{{ form.email.errors }}</div>
          {% endif %}
        </div>

        <div class="space-y-2">
          <label for="id_password1" class="auth-label">Senha *</label>
          <div class="relative">
            <input
              id="id_password1"
              name="password1"
              type="password"
              placeholder="••••••••"
              required
              autocomplete="new-password"
              class="auth-input pr-10"
            >
              <button
                type="button"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-100 md:hover:text-gray-700"
                data-password-toggle="id_password1"
                aria-pressed="false"
                aria-label="Mostrar ou ocultar senha"
              >
                <i class="fas fa-eye" aria-hidden="true"></i>
              </button>
          </div>
          {% if form.password1.errors %}
            <div class="text-red-500 text-xs">{{ form.password1.errors }}</div>
          {% endif %}
          <small class="text-xs text-gray-200 md:text-gray-500 block mt-1">
            Sua senha deve conter pelo menos 8 caracteres e não pode ser muito comum.
          </small>
        </div>

        <div class="space-y-2">
          <label for="id_password2" class="auth-label">Confirmar Senha *</label>
          <div class="relative">
            <input
              id="id_password2"
              name="password2"
              type="password"
              placeholder="••••••••"
              required
              autocomplete="new-password"
              class="auth-input pr-10"
            >
              <button
                type="button"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-100 md:hover:text-gray-700"
                data-password-toggle="id_password2"
                aria-pressed="false"
                aria-label="Mostrar ou ocultar confirmação de senha"
              >
                <i class="fas fa-eye" aria-hidden="true"></i>
              </button>
          </div>
          {% if form.password2.errors %}
            <div class="text-red-500 text-xs">{{ form.password2.errors }}</div>
          {% endif %}
        </div>

        <button
          type="submit"
          class="auth-gradient-cta"
        >
          <i class="fas fa-user-plus"></i>
          Criar Conta
        </button>
      </form>

      <div class="mt-8 pt-6 border-t border-white/10 md:border-gray-200 text-center">
        <p class="text-xs md:text-sm text-gray-200 md:text-gray-600">
          Já tem uma conta?
          <a href="{% url 'login' %}" class="text-blue-100 md:text-blue-600 hover:text-blue-300 md:hover:text-blue-700 font-semibold">
            Fazer Login
          </a>
        </p>
      </div>
    </div>
  </div>
</div>

{% endblock %}

