{% extends 'base.html' %}
{% load static %}

{% block title %}Login - AgroHub UniRV{% endblock %}

{% block content %}
<div class="auth-layout">
  <div class="auth-inner">
    <!-- Back Button -->
    <a href="{% url 'home' %}" class="auth-back-link mb-6">
      <i class="fas fa-arrow-left w-5 h-5 group-hover:-translate-x-1 transition-transform"></i>
      <span class="font-medium">Voltar para o site</span>
    </a>

    <!-- Card -->
    <div class="auth-card">
      <!-- Logo / Heading -->
      <div class="text-center mb-8">
        <a href="{% url 'home' %}" class="inline-flex items-center justify-center gap-3 mb-3">
          <div class="w-12 h-12 rounded-2xl bg-white/90 flex items-center justify-center shadow-md">
            <img src="{% static 'img/Logo AgroHub.svg' %}" alt="AgroHub UniRV Logo" class="w-10 h-10" width="40" height="40" loading="lazy" />
          </div>
        </a>
        <h1 class="auth-title">AgroHub UniRV</h1>
        <p class="auth-muted">Acesso ao painel de gestão de editais</p>
      </div>

      {% if form.errors %}
      <div class="mb-6 rounded-2xl border border-red-200 bg-red-50/90 px-4 py-3 flex gap-3">
        <i class="fas fa-exclamation-circle text-red-600 mt-0.5"></i>
        <div class="text-sm text-red-900">
          {% if form.non_field_errors %}
            {{ form.non_field_errors }}
          {% else %}
            E-mail ou senha inválidos. Tente novamente.
          {% endif %}
        </div>
      </div>
      {% endif %}

      <form method="post" class="space-y-6">
        {% csrf_token %}
        {% if request.GET.next %}<input type="hidden" name="next" value="{{ request.GET.next }}">{% endif %}
        
        <div class="space-y-2">
          <label for="id_username" class="auth-label block mb-2">Usuário ou E-mail</label>
          <input
            id="id_username"
            name="username"
            type="text"
            placeholder="seu_usuario ou email@exemplo.com"
            required
            autocomplete="username"
            class="auth-input w-full"
            value="{{ form.username.value|default:'' }}"
          >
        </div>

        <div class="space-y-2">
          <label for="id_password" class="auth-label block mb-2">Senha</label>
          <div class="relative w-full">
            <input
              id="id_password"
              name="password"
              type="password"
              placeholder="••••••••"
              required
              autocomplete="current-password"
              class="auth-input w-full pr-12"
            >
            <button
              type="button"
              class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1 focus:outline-none focus:ring-2 focus:ring-primary rounded"
              data-password-toggle="id_password"
              aria-pressed="false"
              aria-label="Mostrar ou ocultar senha"
            >
              <i class="fas fa-eye" aria-hidden="true"></i>
            </button>
          </div>
        </div>

        <div class="flex items-center justify-between text-xs md:text-sm">
          <label class="flex items-center gap-2 cursor-pointer">
            <input 
              type="checkbox" 
              name="remember_me"
              class="rounded border-gray-300 text-primary focus:ring-primary"
            >
            <span class="text-gray-600">Lembrar-me</span>
          </label>
          <a href="{% url 'password_reset' %}" class="text-blue-600 hover:text-blue-700 font-medium">
            Esqueceu a senha?
          </a>
        </div>

        <button
          type="submit"
          class="auth-gradient-cta w-full"
        >
          <i class="fas fa-sign-in-alt"></i>
          Entrar
        </button>
      </form>

      <div class="mt-8 pt-6 border-t border-white/10 md:border-gray-200 text-center">
        <p class="text-xs md:text-sm text-gray-600">
          Não tem uma conta?
          <a href="{% url 'register' %}" class="text-blue-600 hover:text-blue-700 font-semibold">
            Criar conta
          </a>
        </p>
      </div>
    </div>
  </div>
</div>

{% endblock %}

