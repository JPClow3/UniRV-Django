# ============================================
# AgroHub - Docker/Staging Environment Variables
# ============================================
# For Docker Compose deployment (staging/production Docker setup)
#
# Usage:
#   cp .env.docker .env
#   # Edit .env with your actual values
#   docker-compose up --build -d
#
# NEVER commit .env files to version control!
# Only this .env.docker template should be version controlled.
# ============================================

# ============================================
# REQUIRED - Must be set before deployment
# ============================================

# Django Secret Key
# Generate with: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
# SECURITY WARNING: Use a strong, unique key!
SECRET_KEY=change-me-to-a-secure-random-string

# Debug Mode - MUST be False in production/staging
DJANGO_DEBUG=False

# Allowed Hosts - your domain(s), comma-separated
# Example: ALLOWED_HOSTS=agrohub.unirv.edu.br,www.agrohub.unirv.edu.br
ALLOWED_HOSTS=localhost

# Site URL (used for emails, admin links, etc.)
SITE_URL=https://your-domain.com

# ============================================
# DATABASE (PostgreSQL)
# ============================================
# Docker container hostname is 'db' (set in docker-compose.yml)
# These variables are used to build DATABASE_URL

DB_NAME=agrohub_production
DB_USER=agrohub_user
DB_PASSWORD=change-me-to-a-secure-password
DB_HOST=db
DB_PORT=5432

# ============================================
# REDIS CACHE
# ============================================
# Docker container hostname is 'redis' (set in docker-compose.yml)
# Format: redis://:PASSWORD@HOST:PORT/DB

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://redis:6379/0
REDIS_MAX_CONNECTIONS=50

CACHE_VERSION=1

# ============================================
# CELERY - Async Task Queue
# ============================================
# Enable Celery for background tasks (emails, reports, etc.)
USE_CELERY=True

# Celery broker and result backend use Redis
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# ============================================
# EMAIL CONFIGURATION
# ============================================
# Option 1: Production Email Service (Recommended)
# Use MailerSend, SendGrid, or AWS SES for reliability

# MailerSend (recommended - reliable, affordable)
EMAIL_BACKEND=anymail.backends.mailersend.EmailBackend
MAILERSEND_API_TOKEN=mlsn_your_mailersend_token_here
DEFAULT_FROM_EMAIL=noreply@your-domain.com
ANYMAIL_WEBHOOK_SECRET=your-webhook-secret

# Option 2: SMTP Backend (less recommended for production)
# Uncomment and configure if using standard SMTP
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=your-email@example.com
# EMAIL_HOST_PASSWORD=your-app-password

# ============================================
# LOGGING
# ============================================
DJANGO_LOG_LEVEL=INFO
DJANGO_LOG_TO_FILE=True
DJANGO_LOG_DIR=/app/logs

# ============================================
# STATIC FILES & COMPRESSION
# ============================================
# Tailwind CSS (pre-compiled in Docker, not on-the-fly)
TAILWIND_COMPILE_ON_THE_FLY=False

# Cache max age for static files (1 year = 31536000 seconds)
# Use when filenames have content hash (WhiteNoise)
WHITENOISE_MAX_AGE=31536000

# ============================================
# GUNICORN DEPLOYMENT SETTINGS
# ============================================
# Number of Gunicorn worker processes
# Auto (0): 2 * CPU_cores + 1
# Small VPS (1-2 CPU): 3-5 recommended
# Medium VPS (4 CPU): 9 recommended
GUNICORN_WORKERS=0

# ============================================
# OPTIONAL - CDN & PERFORMANCE
# ============================================
# CDN base URL for image delivery (optional)
# CDN_BASE_URL=https://imagedelivery.net/your-account-id

# ============================================
# OPTIONAL - SECURITY & COOKIES
# ============================================
# Cookie domain for multi-subdomain support
# COOKIE_DOMAIN=.your-domain.com

# ============================================
# OPTIONAL - PROFILING
# ============================================
# Enable Django Silk profiling (NOT for production)
# Only use in staging for performance debugging
ENABLE_SILK=False

# ============================================
# OPTIONAL - PARTNERS
# ============================================
# Partner organizations for home page marquee
# PARTNERS=SENAI,SEBRAE,FAPEG,FINEP,UNIRV,INOVALAB

# ============================================
# QUICK REFERENCE
# ============================================
#
# To run Docker:
#   cp .env.docker .env
#   docker-compose up --build -d
#
# To generate secure SECRET_KEY:
#   python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
#
# To generate secure DB_PASSWORD:
#   openssl rand -base64 32
#
# Docker services are accessible by their service names:
#   - Database: db:5432 (host: db, port: 5432)
#   - Redis: redis:6379 (host: redis, port: 6379)
#   - Django: localhost:8000 (via Gunicorn)
#
# For SSL/HTTPS:
#   - Place certificates in docker/nginx/ssl/
#   - Update docker/nginx/conf.d/default.conf
#   - Change SITE_URL to https://
#
# For Let's Encrypt:
#   certbot certonly --webroot -w /var/www/certbot -d yourdomain.com
#
# After changing environment variables:
#   docker-compose down && docker-compose up -d
#

